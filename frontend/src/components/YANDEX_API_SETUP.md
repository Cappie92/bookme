# Настройка Яндекс API ключей с ограничениями

## Полученные ключи

### 1. JS API и HTTP Геодекодер
**Ключ**: `32d81139-8da9-4182-9f0a-ef47cfe6733f`
**Использование**: Геокодирование адресов, валидация адресов

### 2. Геосаджест (Suggest API)
**Ключ**: `af4cc42b-a0a0-40d3-a433-7e667ee203a3`
**Использование**: Автодополнение адресов

## Настройка ограничений для API ключей

### Важное уточнение
Если вы используете JavaScript API версии 3.0, необходимо настроить ограничения для API-ключей, чтобы API работали корректно. В предыдущих версиях это не обязательно, но рекомендуется сделать, чтобы защитить ключ.

### Шаги для настройки ограничений:

1. **Перейдите в консоль разработчика Яндекс**
   - Откройте https://developer.tech.yandex.ru/
   - Войдите в свой аккаунт

2. **Найдите ваши API ключи**
   - В разделе "Мои ключи" найдите созданные ключи
   - Нажмите на ключ для редактирования

3. **Настройте ограничения для каждого ключа**

#### Для ключа геокодирования (`32d81139-8da9-4182-9f0a-ef47cfe6733f`):
- **HTTP-рефереры**: Добавьте домены вашего сайта
  - `http://localhost:5173/*` (для разработки)
  - `http://localhost:5174/*` (для разработки)
  - `http://localhost:5175/*` (для разработки)
  - `http://localhost:5176/*` (для разработки)
  - `https://yourdomain.com/*` (для продакшена)
  - `https://*.yourdomain.com/*` (для поддоменов)

#### Для ключа геосаджеста (`af4cc42b-a0a0-40d3-a433-7e667ee203a3`):
- **HTTP-рефереры**: Те же домены, что и выше
- **Типы запросов**: Ограничьте только необходимыми API
  - `suggest-maps.yandex.ru`

4. **Сохраните настройки**

## Текущая конфигурация в проекте

### Файл .env
```env
# Yandex Maps API Configuration
VITE_YANDEX_MAPS_API_KEY=32d81139-8da9-4182-9f0a-ef47cfe6733f

# API Configuration
VITE_API_BASE_URL=http://localhost:8000
```

### Использование в компонентах

#### AddressAutocomplete.jsx
- Использует ключ для автодополнения адресов
- API: `https://suggest-maps.yandex.ru/v1/suggest`

#### AddressValidator.jsx
- Использует ключ для валидации адресов
- API: `https://geocode-maps.yandex.ru/1.x/`

#### MasterSettings.jsx
- Передает ключи в компоненты AddressAutocomplete и AddressValidator

## Проверка работы API

### Тест автодополнения
1. Откройте страницу настроек мастера
2. В поле "Адрес" введите "Москва, ул"
3. Должны появиться подсказки адресов

### Тест валидации
1. Введите корректный адрес
2. Нажмите "Проверить адрес"
3. Должно появиться сообщение о валидности адреса

## Устранение проблем

### Ошибка "API key is not valid"
- Проверьте правильность ключа в .env файле
- Убедитесь, что ограничения настроены правильно
- Проверьте, что домен добавлен в список разрешенных

### Ошибка "Access denied"
- Проверьте настройки ограничений в консоли разработчика
- Убедитесь, что используемый домен в списке разрешенных

### Ошибка "Rate limit exceeded"
- Проверьте лимиты использования в консоли разработчика
- При необходимости увеличьте лимиты или оптимизируйте запросы 