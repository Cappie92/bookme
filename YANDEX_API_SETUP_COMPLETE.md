# –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–∞ –Ø–Ω–¥–µ–∫—Å.–ì–µ–æ–∫–æ–¥–µ—Ä–∞

## üîë API –∫–ª—é—á
```
32d81139-8da9-4182-9f0a-ef47cfe6733f
```

## ‚ùå –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
API –∫–ª—é—á –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É 403 "Invalid api key". 

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:**
```bash
curl "http://localhost:8000/api/geocoder/api-status"
```

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –∫–ª—é—á–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ [–Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã API](https://yandex.ru/dev/maps/)
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ú–æ–∏ –∫–ª—é—á–∏"
4. –ù–∞–π–¥–∏—Ç–µ –∫–ª—é—á: `32d81139-8da9-4182-9f0a-ef47cfe6733f`

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

#### HTTP-—Ä–µ—Ñ–µ—Ä–µ—Ä—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
```
localhost
127.0.0.1
```

#### IP-–∞–¥—Ä–µ—Å–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
```
127.0.0.1
::1
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:
```bash
curl "http://localhost:8000/api/geocoder/api-status"
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "api_key": "32d81139-8da9-4182-9f0a-ef47cfe6733f",
  "is_working": true,
  "message": "API –∫–ª—é—á —Ä–∞–±–æ—Ç–∞–µ—Ç"
}
```

## üöÄ –ß—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### ‚úÖ –ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `text`
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –∏–∑ –ø—É—Ç–∏ URL
- **–û–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º**
- **–ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã**

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# –û–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
curl "http://localhost:8000/api/geocoder/reverse-geocode?lon=37.617635&lat=55.755814"

# –ì–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞
curl "http://localhost:8000/api/geocoder/geocode?address=—É–ª–∏—Ü–∞ –¢–≤–µ—Ä—Å–∫–∞—è, 1"

# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ —Å—Å—ã–ª–∫–∏ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
curl -G "http://localhost:8000/api/geocoder/extract-address-from-url" --data-urlencode "url=https://yandex.ru/maps/213/moscow/?ll=37.617635,55.755814"
```

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –ï—Å–ª–∏ API –∫–ª—é—á –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á** –≤ [–Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã API](https://yandex.ru/dev/maps/)
2. **–û–±–Ω–æ–≤–∏—Ç–µ –∫–ª—é—á** –≤ —Ñ–∞–π–ª–µ `backend/routers/yandex_geocoder.py`
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞

### –¢–µ–∫—É—â–∏–π fallback:
–ü–æ–∫–∞ API –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –∏–∑ —Ç–µ–∫—Å—Ç–∞ —Å—Å—ã–ª–∫–∏:
- ‚úÖ `https://yandex.ru/maps/213/moscow/?text=—É–ª–∏—Ü–∞%20–¢–≤–µ—Ä—Å–∫–∞—è%2C%201`
- ‚ùå `https://yandex.ru/maps/213/moscow/?ll=37.617635,55.755814` (—Ç—Ä–µ–±—É–µ—Ç API)

## üì± –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
- React: `http://localhost:5173/test/yandex-geocoder`
- HTML: `http://localhost:5173/test_yandex_geocoder.html`

### –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö:
- –°–∞–ª–æ–Ω: `http://localhost:5173/salon` ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- –ú–∞—Å—Ç–µ—Ä: `http://localhost:5173/master` ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á** –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å** —á–µ—Ä–µ–∑ `/api/geocoder/api-status`
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** –æ–±—Ä–∞—Ç–Ω–æ–µ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ** –≤ –ø—Ä–æ–¥–∞–∫—à–Ω 