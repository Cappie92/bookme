# –ü–æ—à–∞–≥–æ–≤—ã–π –¥–µ–ø–ª–æ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä

## üéØ –¶–µ–ª—å
–í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–ø–ª–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ—à–∞–≥–æ–≤–æ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º.

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ
2. –°–æ–∑–¥–∞–π—Ç–µ –±—ç–∫–∞–ø –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
3. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

## üöÄ –®–∞–≥–∏ –¥–µ–ø–ª–æ—è

### –®–ê–ì 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh -o ServerAliveInterval=60 -o ServerAliveCountMax=10 root@193.160.208.206
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/home/root/dedato`

### –®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
```bash
docker-compose -f docker-compose.prod.yml ps
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—Ç—å

### –®–ê–ì 3: –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
docker-compose -f docker-compose.prod.yml down
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

### –®–ê–ì 4: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
```bash
# –ò–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
scp -r frontend/src root@193.160.208.206:/home/root/dedato/frontend/
scp frontend/package.json root@193.160.208.206:/home/root/dedato/frontend/
scp frontend/package-lock.json root@193.160.208.206:/home/root/dedato/frontend/
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –§–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –±–µ–∑ –æ—à–∏–±–æ–∫

### –®–ê–ì 5: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –±—ç–∫–µ–Ω–¥–∞
```bash
# –ò–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
scp -r backend/models root@193.160.208.206:/home/root/dedato/backend/
scp -r backend/routers root@193.160.208.206:/home/root/dedato/backend/
scp -r backend/services root@193.160.208.206:/home/root/dedato/backend/
scp backend/main.py root@193.160.208.206:/home/root/dedato/backend/
scp backend/requirements.txt root@193.160.208.206:/home/root/dedato/backend/
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –§–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –±–µ–∑ –æ—à–∏–±–æ–∫

### –®–ê–ì 6: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
```bash
# –ò–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
scp -r backend/alembic root@193.160.208.206:/home/root/dedato/backend/
scp backend/migrate_unified_master.py root@193.160.208.206:/home/root/dedato/backend/
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –§–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã

### –®–ê–ì 7: –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
docker-compose -f docker-compose.prod.yml up -d --build
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

### –®–ê–ì 8: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
docker-compose -f docker-compose.prod.yml ps
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "Up"

### –®–ê–ì 9: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –±—ç–∫–µ–Ω–¥–∞
```bash
docker-compose -f docker-compose.prod.yml logs backend | tail -20
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

### –®–ê–ì 10: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
```bash
docker-compose -f docker-compose.prod.yml logs frontend | tail -20
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

### –®–ê–ì 11: –ü—Ä–æ–≤–µ—Ä–∫–∞ API
```bash
curl -s http://localhost:8000/health
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å `{"status":"healthy","service":"DeDato API"}`

### –®–ê–ì 12: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
```bash
curl -s -I http://localhost:5173 | head -5
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å HTTP 200

### –®–ê–ì 13: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
docker-compose -f docker-compose.prod.yml exec backend python -c "
import sqlite3
conn = sqlite3.connect('/app/bookme.db')
cursor = conn.cursor()
cursor.execute('PRAGMA table_info(salon_masters)')
salon_columns = [row[1] for row in cursor.fetchall()]
print('Salon masters columns:', salon_columns)
cursor.execute('PRAGMA table_info(indie_masters)')
indie_columns = [row[1] for row in cursor.fetchall()]
print('Indie masters columns:', indie_columns)
conn.close()
"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü –¥–æ–ª–∂–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ–∂–∏–¥–∞–µ–º–æ–π

### –®–ê–ì 14: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
docker-compose -f docker-compose.prod.yml exec backend python -c "
import sqlite3
conn = sqlite3.connect('/app/bookme.db')
cursor = conn.cursor()
cursor.execute('SELECT COUNT(*) FROM salon_masters')
salon_count = cursor.fetchone()[0]
cursor.execute('SELECT COUNT(*) FROM indie_masters')
indie_count = cursor.fetchone()[0]
print(f'Salon masters: {salon_count}, Indie masters: {indie_count}')
conn.close()
"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –®–ê–ì 15: –ü—Ä–æ–≤–µ—Ä–∫–∞ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
```bash
curl -s "http://localhost:8000/api/salon/profile/public?salon_id=1"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∞–ª–æ–Ω–µ

### –®–ê–ì 16: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
–û—Ç–∫—Ä–æ–π—Ç–µ http://193.160.208.206:5173 –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏** - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ
2. **–õ–æ–≥–æ—Ç–∏–ø –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ** - –ª–æ–≥–æ—Ç–∏–ø –¥–æ–ª–∂–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å
3. **–õ–æ–≥–∏–Ω —Å–∞–ª–æ–Ω–∞** - –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. **–†–µ–¥–∏—Ä–µ–∫—Ç –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞** - –¥–æ–ª–∂–µ–Ω –≤–µ—Å—Ç–∏ –≤ `/salon`
5. **–ù–∞–≤–∏–≥–∞—Ü–∏—è** - "–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç" –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –®–ê–ì 17: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
# –ò–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
python3 check_deployment_step.py all
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –í—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏ —É—Å–ø–µ—à–Ω–æ

## üö® –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏:
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
docker-compose -f docker-compose.prod.yml down
git checkout HEAD~1
docker-compose -f docker-compose.prod.yml up -d --build
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
```bash
# –ò–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
python3 check_deployment_step.py api      # –ü—Ä–æ–≤–µ—Ä–∫–∞ API
python3 check_deployment_step.py frontend # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
python3 check_deployment_step.py salon    # –ü—Ä–æ–≤–µ—Ä–∫–∞ API —Å–∞–ª–æ–Ω–∞
python3 check_deployment_step.py masters  # –ü—Ä–æ–≤–µ—Ä–∫–∞ API –º–∞—Å—Ç–µ—Ä–æ–≤
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ –∑–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ —Ñ–∞–π–ª:
```bash
echo "–®–ê–ì X: [—Ä–µ–∑—É–ª—å—Ç–∞—Ç]" >> deployment_log.txt
```

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- API –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ
- –õ–æ–≥–æ—Ç–∏–ø –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
- –õ–æ–≥–∏–Ω –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –í—Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

